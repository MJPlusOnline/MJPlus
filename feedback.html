<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="favicon.png">
  <title>MJ+ – Feedback</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="mobile.css?v=2" media="(max-width: 768px)">
  <style>
    :root {
      --accent:#e50914; --spaceX:clamp(14px,3vw,44px); --spaceY:clamp(12px,2.2vw,28px);
      --logoH:clamp(70px,9vh,110px); --navFS:clamp(11px,.95vw,15px); --h2FS:clamp(16px,1.2vw,20px);
      --tileW:clamp(120px,10vw,170px); --gap:clamp(10px,1.2vw,16px);
    }
    * { box-sizing:border-box; -webkit-tap-highlight-color:transparent }
    html,body { height:100% }
    body {
      margin:0; background:#000; color:#fff;
      font:clamp(13px,1vw,16px)/1.45 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      overflow-x:hidden;
    }
    a { color:inherit; text-decoration:none }
    :focus,:focus-visible { outline:0 }

    header {
      position:sticky; top:0; z-index:20;
      display:flex; align-items:center; justify-content:space-between;
      padding:10px var(--spaceX);
      background:#000d; border-bottom:1px solid #ffffff14;
      backdrop-filter:saturate(1.15) blur(4px);
    }
    .logo {
      height:var(--logoH); display:block;
      animation:imgGlow 3.5s ease-in-out infinite;
    }
    nav {
      display:flex; gap:clamp(8px,.8vw,12px); align-items:center; white-space:nowrap;
    }
    nav a, .nav-btn {
      color:#fff; font-size:var(--navFS); text-transform:uppercase; font-weight:800;
      letter-spacing:.04em; padding:4px 8px; border-radius:6px;
      transition:transform .16s,color .16s,text-shadow .16s;
      background:none; border:0; cursor:pointer;
    }
    nav a:hover,nav a:focus-visible,.nav-btn:hover,.nav-btn:focus-visible {
      transform:scale(1.06); color:var(--accent);
      text-shadow:0 0 10px rgba(229,9,20,.55);
    }
    nav a.active { color:var(--accent); text-shadow:0 0 10px rgba(229,9,20,.55); }
    .menu-spacer { height:8px; }

    .nav-btn[aria-disabled="true"] {
      background:#333; border:1px solid #444; color:#888;
      cursor:default; pointer-events:none; opacity:.85;
    }

    main {
      padding:24px var(--spaceX) 60px;
      max-width:1000px; margin:0 auto;
    }
    h1 { margin:0 0 10px; font-size:clamp(20px,1.6vw,26px); }
    p.lead { opacity:.85; margin:0 0 20px; }

    #comments {
      background:#0b0b0b;
      border:1px solid #ffffff12;
      border-radius:12px;
      padding:14px 18px;
    }

    @keyframes imgGlow {
      0%,100% {
        filter:drop-shadow(0 0 6px rgba(255,255,255,.6))
               drop-shadow(0 0 12px rgba(255,255,255,.3));
      }
      50% {
        filter:drop-shadow(0 0 16px rgba(255,255,255,.9))
               drop-shadow(0 0 30px rgba(255,255,255,.6));
      }
    }

    @media (max-width:768px){
      header {
        flex-direction:column; gap:8px; padding:10px 16px;
      }
      .logo { height:64px; margin:4px auto 0; }
      .menu-toggle {
        display:block; background:#000; color:#fff;
        border:1px solid #ffffff33; border-radius:10px;
        padding:10px 14px; font-weight:800; letter-spacing:.04em;
        cursor:pointer; width:100%; max-width:520px; text-align:center;
      }
      header nav {
        width:100%; max-width:520px; margin:0 auto;
        display:block; overflow:hidden; max-height:0;
        transition:max-height .28s ease;
        border-radius:12px; border:1px solid #ffffff14; background:#000a;
      }
      header.nav-open nav { max-height:60vh; }
      header nav a, header nav .nav-btn {
        display:block; width:100%; text-align:center;
        padding:12px 14px; border-bottom:1px solid #ffffff14;
        white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      }
      header nav a:last-child, header nav .nav-btn:last-child { border-bottom:0; }
    }
  </style>
</head>
<body data-page="feedback">
  <header>
    <img src="logo.png" alt="MJ+ Logo" class="logo">
    <nav aria-label="Main menu">
      <a href="home.html" data-nav>Home</a>
      <a href="live.html" data-nav>Live</a>
      <a href="tv-appearances.html" data-nav>TV Appearances</a>
      <a href="short-films.html" data-nav>Short Films</a>
      <a href="jacksons.html" data-nav>The Jacksons</a>
      <a href="feedback.html" class="active" data-nav>Feedback</a>
      <button id="openSearch" class="nav-btn" tabindex="-1" aria-disabled="true">Search</button>
    </nav>
  </header>
  <div class="menu-spacer"></div>

  <main>
    <h1>Feedback</h1>
    <p class="lead">Share your feedback, suggestions, and ideas here. All comments are publicly visible.</p>
<section id="feedback-discussion" class="feedback-discussion">
  <h2>Feedback Discussion</h2>

  <form id="fd-form">
    <div class="row">
      <label>
        Name (optional)
        <input name="name" maxlength="80" placeholder="Your name">
      </label>
    </div>
    <div class="row">
      <label>
        Feedback
        <textarea name="message" required maxlength="2000" placeholder="Your feedback..."></textarea>
      </label>
    </div>

    <input name="honeypot" class="hp" autocomplete="off" tabindex="-1">

    <button type="submit">Submit</button>
    <span id="fd-status" class="status" aria-live="polite"></span>
  </form>

  <ul id="fd-list" class="fd-list"></ul>
</section>

<style>
  .feedback-discussion { max-width: 720px; margin: 2rem auto; }
  .feedback-discussion .row { margin-bottom: .75rem; }
  .feedback-discussion input, .feedback-discussion textarea {
    width: 100%; padding: .6rem; border-radius: .5rem; border: 1px solid #333;
    background: #000; color: #fff;
  }
  .feedback-discussion button {
    padding: .6rem 1rem; border-radius: .5rem; border: 1px solid #e50914;
    background: #e50914; color: #fff; cursor: pointer;
  }
  .feedback-discussion .hp { position: absolute; left: -9999px; height:0; width:0; opacity:0; }
  .fd-list { list-style: none; padding: 0; margin: 1.5rem 0 0; display: grid; gap: .75rem; }
  .fd-item { border: 1px solid #222; border-radius: .75rem; padding: .75rem; background: #0b0b0f; }
  .fd-meta { opacity: .7; font-size: .85rem; margin-bottom: .25rem; }
  .status { margin-left: .75rem; opacity: .8; }
</style>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDmKTXGDL27WrAWq5lydyJhbUHY9Ynr8SY",
    authDomain: "mjplus-abd61.firebaseapp.com",
    databaseURL: "https://mjplus-abd61-default-rtdb.firebaseio.com",
    projectId: "mjplus-abd61",
    storageBucket: "mjplus-abd61.appspot.com",
    messagingSenderId: "205330453861",
    appId: "1:205330453861:web:080b7c925508b873e87d8c",
    measurementId: "G-7N00MB6RZ8"
  };

  // Initialisieren (mit der „compat“ Version funktioniert es in klassischem JS)
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const form = document.getElementById("fd-form");
  const list = document.getElementById("fd-list");
  const status = document.getElementById("fd-status");

  form.addEventListener("submit", e => {
    e.preventDefault();
    const name = form.name.value.trim() || "Anonymous";
    const message = form.message.value.trim();
    if (!message) return;

    status.textContent = "Sending...";

    const entry = { name, message, time: new Date().toISOString() };

    db.ref("comments").push(entry)
      .then(() => {
        form.reset();
        status.textContent = "✅ Thank you for your feedback!";
        setTimeout(() => status.textContent = "", 3000);
      })
      .catch(err => {
        console.error(err);
        status.textContent = "❌ Error sending feedback.";
      });
  });

  // Live-Kommentare laden
  db.ref("comments").on("value", snapshot => {
    list.innerHTML = "";
    const data = snapshot.val();
    if (!data) return;
    Object.values(data).reverse().forEach(entry => {
      const li = document.createElement("li");
      li.className = "fd-item";
      const time = new Date(entry.time).toLocaleString();
      li.innerHTML = `
        <div class="fd-meta">${entry.name} — <time>${time}</time></div>
        <div class="fd-msg">${entry.message}</div>
      `;
      list.appendChild(li);
    });
  });
</script>
  </main>

  <!-- Scripts -->
  <script src="mobile-menu.js?v=1.0.0"></script>
  <script src="catalog.js?v=1.0.3"></script>
  <script src="player.js?v=1.0.3"></script>
  <script src="playlist.js"></script>
</body>
</html>