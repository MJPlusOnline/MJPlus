<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="favicon.png">
  <title>MJ+ – Live</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>
  <!-- Mobile styles optional -->
  <link rel="stylesheet" href="mobile.css?v=2" media="(max-width: 768px)">

  <style>
    @keyframes imgGlow {
      0%, 100% { filter: drop-shadow(0 0 6px rgba(255,255,255,.6)) drop-shadow(0 0 12px rgba(255,255,255,.3)); }
      50%      { filter: drop-shadow(0 0 16px rgba(255,255,255,.9)) drop-shadow(0 0 30px rgba(255,255,255,.6)); }
    }
    :root{
      --accent:#e50914; --spaceX:clamp(14px,3vw,44px); --spaceY:clamp(12px,2.2vw,28px);
      --logoH:clamp(70px,9vh,110px); --navFS:clamp(11px,.95vw,15px); --h2FS:clamp(16px,1.2vw,20px);
      --tileW:clamp(120px,10vw,170px); --gap:clamp(10px,1.2vw,16px);
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{height:100%}
    body{margin:0;background:#000;color:#fff;font:clamp(13px,1vw,16px)/1.45 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;overflow-x:hidden}
    a{color:inherit;text-decoration:none} :focus,:focus-visible{outline:0}

    header{
      position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;
      padding:10px var(--spaceX);background:#000d;border-bottom:1px solid #ffffff14;
      backdrop-filter:saturate(1.15) blur(4px)
    }
    header .logo{height:var(--logoH);display:block;animation:imgGlow 3.5s ease-in-out infinite;transition:filter .3s}
    nav{display:flex;gap:clamp(8px,.8vw,12px);align-items:center;white-space:nowrap}
    nav a, .nav-btn{
      color:#fff;font-size:var(--navFS);text-transform:uppercase;font-weight:800;letter-spacing:.04em;
      padding:4px 8px;border-radius:6px;transition:transform .16s,color .16s,text-shadow .16s;background:none;border:0;cursor:pointer
    }
    nav a:hover,nav a:focus-visible,.nav-btn:hover,.nav-btn:focus-visible{transform:scale(1.06);color:var(--accent);text-shadow:0 0 10px rgba(229,9,20,.55)}
    nav a.active{color:var(--accent);text-shadow:0 0 10px rgba(229,9,20,.55)}
    .menu-spacer{height:8px}

    /* Filterbar */
    .filters{display:flex;gap:8px;flex-wrap:wrap;padding:var(--spaceY) var(--spaceX) 8px}
    .filter-btn{background:#111;border:1px solid #ffffff2a;color:#fff;border-radius:999px;padding:8px 12px;font-weight:800;letter-spacing:.04em;cursor:pointer}
    .filter-btn.active{background:var(--accent);border-color:var(--accent)}

    .section{padding:10px var(--spaceX)}
    .section h2{font-size:var(--h2FS);margin:0 0 10px 6px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--tileW),1fr));gap:var(--gap)}
    .tile{position:relative;cursor:pointer;background:none;border:0;padding:0;transition:transform .18s ease;width:var(--tileW)}
    .tile img{width:100%;aspect-ratio:2/3;object-fit:cover;border-radius:12px;display:block;box-shadow:0 2px 6px #000a}
    .tile::after{
      content:"";position:absolute;inset:-10px;border-radius:14px;
      background:radial-gradient(ellipse at center, rgba(229,9,20,.35) 0%, rgba(229,9,20,.18) 36%, transparent 70%);
      filter:blur(14px);opacity:0;transition:opacity .18s
    }
    .tile:hover,.tile:focus-visible{transform:scale(1.06)} .tile:hover::after,.tile:focus-visible::after{opacity:1}
    .badge{
      position:absolute;top:6px;right:6px;font-weight:900;font-size:11px;letter-spacing:.06em;
      padding:4px 6px;border-radius:8px;background:#e50914;color:#fff;box-shadow:0 2px 10px #000c
    }

    /* Tours Layout */
    #toursSec{display:none}
    .tour-block{padding:18px var(--spaceX) 8px}
    .tour-title{font-size:clamp(18px,1.4vw,22px);font-weight:900;letter-spacing:.02em;margin:0 0 12px}

    /* Mobile menu (optional) */
    @media (max-width: 768px){
      header{flex-direction:column;gap:8px;padding:10px 16px}
      header .logo{height:64px;margin:4px auto 0}
      .menu-toggle{
        display:block;background:#000;color:#fff;border:1px solid #ffffff33;border-radius:10px;
        padding:10px 14px;font-weight:800;letter-spacing:.04em;cursor:pointer;width:100%;max-width:520px;text-align:center;
      }
      header nav{width:100%;max-width:520px;display:block;overflow:hidden;max-height:0;transition:max-height .28s ease;border-radius:12px;border:1px solid #ffffff14;background:#000a}
      header.nav-open nav{ max-height:60vh; }
      header nav a, header nav .nav-btn{display:block;width:100%;text-align:center;padding:12px 14px;border-bottom:1px solid #ffffff14;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
      header nav a:last-child, header nav .nav-btn:last-child{ border-bottom:0; }
      html,body{ overflow-x:hidden; }
    }
/* Tour-Logos statt Titel */
.tour-logo{
  height: 40px;            /* Größe nach Wunsch */
  display:block;
  margin: 0 0 12px 0;      /* Abstand zum Grid */
  filter: brightness(0.95) contrast(1.15);
  transition: filter .2s ease, transform .2s ease;
}
.tour-logo:hover{
  filter: brightness(1.15) contrast(1.25);
  transform: scale(1.02);
}

/* Falls Fallback-Titel erscheint, etwas Abstand */
.tour-title{ margin: 0 0 12px; }
  </style>
</head>

<body data-page="live">
  <header>
    <img src="logo.png" alt="MJ+ Logo" class="logo">
    <button class="menu-toggle" aria-label="Open menu" style="display:none">☰</button>
    <nav aria-label="Main menu">
      <a href="home.html" data-nav>Home</a>
      <a href="live.html" class="active">Live</a>
      <a href="tv-appearances.html" data-nav>TV Appearances</a>
      <a href="short-films.html" data-nav>Short Films</a>
      <a href="jacksons.html" data-nav>The Jacksons</a>
      <a href="feedback.html" tabindex="0" data-nav>Feedback</a>
      <button id="openSearch" class="nav-btn">Search</button>
    </nav>
  </header>
  <div class="menu-spacer"></div>

  <!-- Filter-Bar -->
  <div class="filters" id="filters">
    <button class="filter-btn active" data-filter="all">ALL</button>
    <button class="filter-btn" data-filter="am">AM.</button>
    <button class="filter-btn" data-filter="pro">PRO.</button>
    <button class="filter-btn" data-filter="tours">TOURS</button>
  </div>

  <!-- Normal Grid -->
  <section class="section" id="listSec">
    <h2>All</h2>
    <div id="grid" class="grid" aria-live="polite"></div>
  </section>

  <!-- Tours View -->
  <section id="toursSec" aria-live="polite"></section>

  <!-- Reihenfolge + defer wichtig:
       1) catalog.js muss vor player.js da sein (damit initLive sofort Daten hat)
       2) Danach unsere Page-Bootstrap-Calls -->
  <script src="catalog.js?v=1.0.3" defer></script>
  <script src="player.js?v=1.0.3" defer></script>
  <script src="mobile-menu.js?v=1.0.0" defer></script>

  <script>
    // Robustes Page-Bootstrap: warten bis alle defer-Skripte geparst sind
    window.addEventListener('DOMContentLoaded', () => {
      // Falls dein mobile-menu.js nicht automatisch toggelt:
      (function setupMobileMenu(){
        const header = document.querySelector('header');
        const toggle = header.querySelector('.menu-toggle');
        if (!toggle) return;
        // nur auf Mobile sichtbar
        if (window.innerWidth <= 768) toggle.style.display = 'block';
        toggle.addEventListener('click', () => header.classList.toggle('nav-open'));
        document.addEventListener('click', (e)=>{ if (!header.contains(e.target)) header.classList.remove('nav-open'); });
      })();

      // LIVE initialisieren (Player-Core)
      window.MJPLUS?.initLive?.();
      // Globale Suche (aus player.js)
      window.MJPLUS?.initSearchUI?.();
    });
  </script>
</body>
</html>